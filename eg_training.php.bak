<?php
/*
Plugin Name: Training
Plugin URI: http://
Description: Set up training courses and link to training providers, awarding bodies, etc
Version: 0.1
Author: Stef Williams
Author Email: WilliamsSP5@cf.ac.uk
*/
include_once('cpt/awarder.php');
include_once('cpt/awarder_meta.php');
include_once('cpt/course.php');//<-- the main container CPT
include_once('cpt/course_meta.php');
include_once('cpt/provider.php');
include_once('cpt/provider_meta.php');
include_once('cpt/save_meta.php');
//include_once('templates/course_list.php');
include_once('send_mail.php'); //<-- does all the mail processing for the course-list page

//load scripts that rely on jQuery, but only on the pages that need it
function training_scripts($hook) {
    if( $hook != 'edit.php' && $hook != 'post.php' && $hook != 'post-new.php' )
        return;
    wp_enqueue_script( 'adminjs', plugins_url( 'training/js/admin.js' , dirname(__FILE__) ) );
}
add_action('admin_enqueue_scripts', 'training_scripts');


//load scripts for course-list page
function enqueue_dependencies () {
	if (is_page_template( 'page-course-matrix.php' )) {

		$plugin_path = plugins_url( 'training' );
		// wp_enqueue_script('jquery-ui-dialog', array('jquery'));
		// wp_enqueue_script('jquery-ui-accordion', array('jquery'));
		//wp_enqueue_style('jquery-ui', $plugin_path.'/css/jquery-ui.css', array(), '1.10.1' );
		wp_register_script('jquery-courselist', $plugin_path.'/js/jquery.courselist.js', array('jquery-bootstrap'), '0.1', true);
		wp_enqueue_script('jquery-courselist');
		wp_localize_script('jquery-courselist', 'ajax_object', array( 'ajax_url' => admin_url( 'admin-ajax.php' )));

		wp_register_script('jquery-coursefilter', $plugin_path.'/js/jquery.coursefilter.js', array('jquery-bootstrap'), '0.1', true);
		wp_enqueue_script('jquery-coursefilter');
		wp_enqueue_style('courselist', $plugin_path.'/css/courselist.css', array(), '0.1' );
	}	
}

add_action( 'wp_enqueue_scripts', 'enqueue_dependencies' );

//shortcode for course-list, if necessary

//add_shortcode( 'lmw_course_list', 'lmw_course_list' );

?>